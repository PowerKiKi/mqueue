<h2><?php echo $this->translate('Users list'); ?></h2>
<h3><?php echo $this->translate('Overall statistics'); ?></h3>
<table>
<?php

// Table header
echo '<tr>';
echo '<th>' . $this->translate('User') . '</th>';
foreach (Default_Model_Status::$ratings as $val => $name)
{
	echo '<th><span class="status current status_' . $val . '" title="' . $name . '"><span>' . $name . '</span></span></th>';
}
echo '<th>' . $this->translate('Rated') . '</th>';	
echo '<th>' . $this->translate('Not rated') . '</th>';
echo '</tr>';

// Table data
foreach ($this->users as $user)
{
	echo '<tr>';
	echo '<td class="user"><a href="' . $this->url(array(
										'controller' => 'user',
										'action' => 'view',
										'nickname' => $user->nickname
										),
									'default', true) . '">' . $this->gravatar($user). ' ' . $this->escape($user->nickname) . '</a></td>';
	$stats = $user->getStatistics();
	foreach (Default_Model_Status::$ratings as $val => $name)
	{
		echo '<td class="number"><a href="' . $this->url(array(
										'controller' => 'movie',
										'action' => 'index',
										'filterUser' => $user->id,
										'filterStatus' => $val
										),
									'default', true) . '">' . $stats[$val] . '</a></td>';
	}
	echo '<td class="number"><a href="' . $this->url(array(
										'controller' => 'movie',
										'action' => 'index',
										'filterUser' => $user->id,
										'filterStatus' => -1
										),
									'default', true) . '">' . $stats['rated'] . '</a></td>';
	echo '<td class="number"><a href="' . $this->url(array(
										'controller' => 'movie',
										'action' => 'index',
										'filterUser' => $user->id,
										'filterStatus' => 0
										),
									'default', true) . '">' . $stats[Default_Model_Status::Nothing] . '</a></td>';
	echo '</tr>';
}
?>
</table>

<h3><?php echo $this->translate('Overall activity'); ?></h3>
<?php echo $this->activity($this->activity); ?>