<h2><?php echo $this->translate('Users list'); ?></h2>

<table>
<?php

// Table header
echo '<tr>';
echo '<th></th>';
foreach (Default_Model_Status::$ratings as $val => $name)
{
	echo '<th>' . $name . '</th>';
}
echo '<th>' . $this->translate('Not rated') . '</th>';	
echo '</tr>';

// Table data
foreach ($this->users as $user)
{
	echo '<tr>';
	echo '<td><a href="' . $this->url(array(
										'controller' => 'user',
										'action' => 'view',
										'nickname' => $user->nickname
										),
									'default', true) . '">' . $this->escape($user->nickname) . '</a></td>';
	$stats = $user->getStatistics();
	foreach (Default_Model_Status::$ratings as $val => $name)
	{
		echo '<td><a href="' . $this->url(array(
										'controller' => 'movie',
										'action' => 'index',
										'filterUser' => $user->id,
										'filterStatus' => $val
										),
									'default', true) . '">' . $stats[$val] . '</a></td>';
	}
	echo '<td><a href="' . $this->url(array(
										'controller' => 'movie',
										'action' => 'index',
										'filterUser' => $user->id,
										'filterStatus' => 0
										),
									'default', true) . '">' . $stats[Default_Model_Status::Nothing] . '</a></td>';
	echo '</tr>';
}
?>
</table>
<p><?php echo $this->translate('Total number of movie is %s', array($stats['total'])); ?></p>